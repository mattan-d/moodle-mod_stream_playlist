{"version":3,"file":"playlist.min.js","sources":["../src/playlist.js"],"sourcesContent":["define([\"jquery\", \"core/ajax\"], ($, ajax) => ({\n  init: () => {\n    $(\".playlist-item\").on(\"click\", function () {\n      var playlistItem = $(this)\n      var container = playlistItem.closest(\".stream-playlist-container\")\n      var mainVideoContainer = container.find(\".stream-main-video\")\n\n      if (playlistItem.hasClass(\"active\")) {\n        return // Don't reload if it's already active.\n      }\n\n      var identifier = playlistItem.data(\"identifier\")\n      var cmid = container.data(\"cmid\")\n      var includeaudio = container.data(\"includeaudio\")\n\n      // Set active state\n      container.find(\".playlist-item\").removeClass(\"active\")\n      playlistItem.addClass(\"active\")\n\n      // Show loading indicator\n      mainVideoContainer.html(\n        '<div class=\"loading-overlay\"><div class=\"spinner-border\" role=\"status\"><span class=\"sr-only\">Loading...</span></div></div>',\n      )\n\n      ajax\n        .call([\n          {\n            methodname: \"mod_stream_get_player\",\n            args: {\n              cmid: cmid,\n              identifier: identifier,\n              includeaudio: includeaudio,\n            },\n          },\n        ])[0]\n        .done((response) => {\n          mainVideoContainer.html(response.html)\n        })\n        .fail((ex) => {\n          // Handle error\n          mainVideoContainer.html('<div class=\"alert alert-danger\">Failed to load video.</div>')\n          console.error(ex)\n        })\n    })\n  },\n}))\n"],"names":["define","$","ajax","init","on","playlistItem","this","container","closest","mainVideoContainer","find","hasClass","identifier","data","cmid","includeaudio","removeClass","addClass","html","call","methodname","args","done","response","fail","ex","console","error"],"mappings":"AAAAA,OAAM,sBAAC,CAAC,SAAU,aAAc,CAACC,EAAGC,QAAU,CAC5CC,KAAMA,KACJF,EAAE,kBAAkBG,GAAG,QAAS,WAC9B,IAAIC,aAAeJ,EAAEK,MACjBC,UAAYF,aAAaG,QAAQ,8BACjCC,mBAAqBF,UAAUG,KAAK,sBAExC,IAAIL,aAAaM,SAAS,UAA1B,CAIA,IAAIC,WAAaP,aAAaQ,KAAK,cAC/BC,KAAOP,UAAUM,KAAK,QACtBE,aAAeR,UAAUM,KAAK,gBAGlCN,UAAUG,KAAK,kBAAkBM,YAAY,UAC7CX,aAAaY,SAAS,UAGtBR,mBAAmBS,KACjB,8HAGFhB,KACGiB,KAAK,CACJ,CACEC,WAAY,wBACZC,KAAM,CACJP,KAAMA,KACNF,WAAYA,WACZG,aAAcA,iBAGjB,GACFO,KAAMC,WACLd,mBAAmBS,KAAKK,SAASL,QAElCM,KAAMC,KAELhB,mBAAmBS,KAAK,+DACxBQ,QAAQC,MAAMF,KAhClB,CAkCF"}