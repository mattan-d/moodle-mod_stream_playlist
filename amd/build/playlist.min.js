define("mod_stream/playlist",["jquery","core/ajax","core/str"],($,ajax,str)=>({init:()=>{$(".playlist-item").on("click",function(){var playlistItem=$(this),container=playlistItem.closest(".stream-playlist-container"),mainVideoContainer=container.find(".stream-main-video");if(!playlistItem.hasClass("active")){var identifier=playlistItem.data("identifier"),cmid=container.data("cmid"),includeaudio=container.data("includeaudio");container.find(".playlist-item").removeClass("active"),playlistItem.addClass("active"),mainVideoContainer.html('<div class="loading-overlay"><div class="spinner-border" role="status"><span class="sr-only">Loading...</span></div></div>'),ajax.call([{methodname:"mod_stream_mark_as_viewed",args:{cmid:cmid,videoid:identifier}}])[0].done(()=>{playlistItem.find(".playlist-viewed-badge").length||str.get_string("viewed","mod_stream").then(viewedString=>{playlistItem.find(".playlist-item-content").append('<span class="badge badge-success playlist-viewed-badge">'+viewedString+"</span>")})}),ajax.call([{methodname:"mod_stream_get_player",args:{cmid:cmid,identifier:identifier,includeaudio:includeaudio}}])[0].done(response=>{mainVideoContainer.html(response.html)}).fail(ex=>{mainVideoContainer.html('<div class="alert alert-danger">Failed to load video.</div>'),console.error(ex)})}})}}));

//# sourceMappingURL=playlist.min.js.map
